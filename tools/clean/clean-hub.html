<section class="p-6 rounded-2xl bg-zinc-900 border border-zinc-800 space-y-4">
    <div class="flex items-center gap-3 text-sky-400">
        <i data-lucide="scissors" class="w-6 h-6"></i>
        <h3 class="font-bold text-zinc-100">BG Remover</h3>
    </div>
    
    <div id="bg-upload-zone" class="border-2 border-dashed border-zinc-800 rounded-xl p-8 text-center transition-all">
        <input type="file" id="bg-input" accept="image/*" class="hidden" onchange="removeBackground(event)">
        <label for="bg-input" class="cursor-pointer">
            <i data-lucide="user-minus" class="w-8 h-8 mx-auto mb-2 text-zinc-700"></i>
            <p class="text-xs text-zinc-400 font-bold">Upload Portrait/Object</p>
        </label>
    </div>

    <div id="bg-result" class="hidden space-y-4">
        <div class="rounded-xl overflow-hidden bg-[url('https://www.transparenttextures.com/patterns/checkerboard.png')] bg-zinc-800">
            <img id="preview-img" class="max-w-full h-auto mx-auto" />
        </div>
        <button onclick="downloadResult()" class="w-full bg-sky-600 py-3 rounded-xl font-bold text-sm">Download PNG</button>
    </div>
    
    <div id="bg-status" class="text-center text-[10px] font-mono text-zinc-500"></div>
</section>

<script>
    async function removeBackground(event) {
        const file = event.target.files[0];
        if (!file) return;

        const status = document.getElementById('bg-status');
        const uploadZone = document.getElementById('bg-upload-zone');
        const resultZone = document.getElementById('bg-result');
        const previewImg = document.getElementById('preview-img');

        status.innerText = "Connecting to AI Processor...";
        
        // We use a FormData object to send the image to the API
        const formData = new FormData();
        formData.append('image_file', file);
        formData.append('size', 'auto');

        // YOU NEED A FREE KEY FROM REMOVE.BG (Takes 30 seconds to sign up)
        // Put your key here:
        const API_KEY = 'YOUR_FREE_REMOVE_BG_KEY_HERE';

        try {
            const response = await fetch('https://api.remove.bg/v1.0/removebg', {
                method: 'POST',
                headers: { 'X-Api-Key': API_KEY },
                body: formData
            });

            if (response.ok) {
                const blob = await response.blob();
                const url = URL.createObjectURL(blob);
                previewImg.src = url;
                uploadZone.classList.add('hidden');
                resultZone.classList.remove('hidden');
                status.innerText = "Background Removed!";
            } else {
                status.innerText = "Error: Please add your API key to the code.";
                alert("To activate, you need a free API key from remove.bg. Paste it into your clean-hub.html file!");
            }
        } catch (err) {
            status.innerText = "Connection Failed.";
        }
    }

    function downloadResult() {
        const img = document.getElementById('preview-img');
        const link = document.createElement('a');
        link.href = img.src;
        link.download = 'no-bg.png';
        link.click();
    }
</script>
